# DEFLATE COMPRESSION

###  : 데이터를 압축하는 것. 웹 페이지 데이터를 압축하는 것

#### 압축된 상태에서 사용자의 개인정보는 노출되지 않게 처리하여야 함.

#### 궁극적으로는 데이터의 사이즈를 줄이는 게 핵심임.

##### 



### DEFLATE compression 사용률 

- 70% 정도이나 앞으로 더 늘어날 예정이라고 함.
- 데이터의 사이즈가 줄고 Through









##### LZ77 알고리즘 : 동일한 패턴의 문자열을 찾아 문자열 값 자체를 카피하는 것으로 전송 데이터를 압축시킨다.

ex) <14,7> : 14번 앞쪽부터 7자 만큼을 그대로 복사한다.



**허프만 압축 알고리즘 :** 가장 빈도수가 높은 문자를 가장 짧은 비트 데이터와 매칭하여

인코딩과 디코딩 과정을 통해 전송 데이터의 크기를 줄이는 알고리즘.

- 무손실 압축이 진행되는 경우에 **LZ77**이나 **허프만 압축 알고리즘**이 사용될 수 있다.



S(=1234567)라고 하는 민감한 데이터가 서버로 전송이 될 때,

공격자는 X1 = 12340과 X5=12345를 서버에 값을 보내고

압축되는 데이터가 X1은 5byte, X5는 4byte의 값을 얻었다.

이렇게 S와 가까운 데이터를 찾아간다.



**이유는 매칭되는 데이터의 길이가 더 길기 때문에.**



### 하지만 LZ77 알고리즘은 Compression Side Channel Attack을 받을 수 있다.



데이터 O를 보낼 때,

O`으로 압축한 뒤에 Encrypt 과정을 거친다.



키 값을 모르면 복호화하는 게 거의 불가능하기 때문에.













```java
// Compression Side Channel Attack의 공격 순서
1. Trudy가 클라이언트 몰래 클라이언트를 컨트롤 할 수 있는 상황.
    
2. Trudy는 Xi가 포함된 정보를 Client를 통해서 Server로 요청을 보내게 됨.
    사실 이 Request는 Trudy로부터 보내져온 요청임.

3. 웹 서버는 Trudy로부터 Xi가 포함되어 있는 요청을 받아 Ci를 전송하게 됨.
    
4. Trudy는 이 때 Ci의 크기를 관찰 해봄.
    
5. 이를 반복하여 관찰된 결과로부터 가장 크기가 작은 Cx를 찾아낸다.

```



### CSRF 실습 내용 발표











